<!DOCTYPE html>
<html lang="en">

<head>
    <title>underline.js -- A javascript library that sets out to do one simple job: draw and animate the most perfect and playful text underline</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/EB+Garamond:400,400i/Fira+Sans:300,400,500,700/Source+Code+Pro:300,400">
    <link rel="icon" href="favicon.png" type="image/x-icon"/>

	<link type="text/css" rel="stylesheet" href="css/underline.css" />
    <link type="text/css" rel="stylesheet" href="css/style.css" />

    <script src="https://code.createjs.com/soundjs-0.6.0.min.js"></script>

	<script type="text/javascript" src="js/classie.js"></script>
	<script type="text/javascript" src="js/baseline-ratio.js"></script>
	<script type="text/javascript" src="js/underline.js"></script>
	<script type="text/javascript" src="js/guitar-string.js"></script>
	<script type="text/javascript" src="js/single-underline.js"></script>
	<script type="text/javascript" src="js/multiple-underline.js"></script>
</head>
<body>
<div class="audio">
    <audio id="audio00" src="audio/cello_00.mp3" preload="auto"></audio>
    <audio id="audio01" src="audio/cello_01.mp3" preload="auto"></audio>
    <audio id="audio02" src="audio/cello_02.mp3" preload="auto"></audio>
    <audio id="audio03" src="audio/cello_03.mp3" preload="auto"></audio>
    <audio id="audio04" src="audio/cello_04.mp3" preload="auto"></audio>
    <audio id="audio05" src="audio/cello_05.mp3" preload="auto"></audio>
    <audio id="audio06" src="audio/cello_06.mp3" preload="auto"></audio>
    <audio id="audio07" src="audio/cello_07.mp3" preload="auto"></audio>
    <audio id="audio08" src="audio/cello_08.mp3" preload="auto"></audio>
    <audio id="audio09" src="audio/cello_09.mp3" preload="auto"></audio>
    <audio id="audio10" src="audio/cello_10.mp3" preload="auto"></audio>
    <audio id="audio11" src="audio/cello_11.mp3" preload="auto"></audio>
    <audio id="audio12" src="audio/cello_12.mp3" preload="auto"></audio>
    <audio id="audio13" src="audio/cello_13.mp3" preload="auto"></audio>
    <audio id="audio14" src="audio/cello_14.mp3" preload="auto"></audio>
    <audio id="audio15" src="audio/cello_15.mp3" preload="auto"></audio>
    <audio id="audio16" src="audio/cello_16.mp3" preload="auto"></audio>
    <audio id="audio17" src="audio/cello_17.mp3" preload="auto"></audio>
    <audio id="audio18" src="audio/cello_18.mp3" preload="auto"></audio>
    <audio id="audio19" src="audio/cello_19.mp3" preload="auto"></audio>
</div>
<header>
	<a href="http://wentin.github.io/underlineJS" class="logo">
        <img src="i/logo.svg" alt="">
	</a>
	<div class="hamburger"><i></i></div>
	<div class="menu">
        <a href="https://github.com/wentin/underlineJS" target="_blank" class="github icon-github">Star underline.js</a>
	</div>
</header>
<div class="trigger"></div>
<article>
<h1>Live Demo</h1>
<p>
<a href="#" class="underline title">Twelfth Night</a>
</p>
<p class="text">
    <a href="#" class="underline">Make me a willow cabin</a>
    <br>
    <a href="#" class="underline">at your gate</a>
    <br>
    <a href="#" class="underline">And call upon my soul within the house.</a>
    <br>
    <a href="#" class="underline">Write loyal cantons of</a>
    <br>
    <a href="#" class="underline">contemned love</a>
    <br>
    <a href="#" class="underline">And sing them loud</a>
    <br>
    <a href="#" class="underline">even in the dead of night.</a>
    <br>
    <a href="#" class="underline">Halloo your name</a>
    <br>
    <a href="#" class="underline">to the reverberate hills</a>
    <br>
    <a href="#" class="underline">And make the babbling gossip of the air</a>
    <br>
    <a href="#" class="underline">Cry out &ldquo;Olivia!&rdquo;</a>
    <br>
    <a href="#" class="underline">Oh,</a>
    <br>
    <a href="#" class="underline">you should not rest</a>
    <br>
    <a href="#" class="underline">Between the elements of air and earth,</a>
    <br>
    <a href="#" class="underline">But you should pity me.</a>
    <br>

</p>

</article>
<footer>
	<a href="https://twitter.com/intent/tweet?text=underline.js: A quest to pixel-perfect underline with canvas, and music&via=DesignJokes&url=http://wentin.github.io/underlinejs/&hashtags=UnderlineJS" target="_blank" class="share icon-share">
		
	</a>
</footer>
		<script>
			(function() {
				// detect if IE : from http://stackoverflow.com/a/16657946		
				var ie = (function(){
					var undef,rv = -1; // Return value assumes failure.
					var ua = window.navigator.userAgent;
					var msie = ua.indexOf('MSIE ');
					var trident = ua.indexOf('Trident/');

					if (msie > 0) {
						// IE 10 or older => return version number
						rv = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
					} else if (trident > 0) {
						// IE 11 (or newer) => return version number
						var rvNum = ua.indexOf('rv:');
						rv = parseInt(ua.substring(rvNum + 3, ua.indexOf('.', rvNum)), 10);
					}

					return ((rv > -1) ? rv : undef);
				}());


				// disable/enable scroll (mousewheel and keys) from http://stackoverflow.com/a/4770179					
				// left: 37, up: 38, right: 39, down: 40,
				// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36
				var keys = [32, 37, 38, 39, 40], wheelIter = 0;

				function preventDefault(e) {
					e = e || window.event;
					if (e.preventDefault)
					e.preventDefault();
					e.returnValue = false;  
				}

				function keydown(e) {
					for (var i = keys.length; i--;) {
						if (e.keyCode === keys[i]) {
							preventDefault(e);
							return;
						}
					}
				}

				function touchmove(e) {
					preventDefault(e);
				}

				function wheel(e) {
					// for IE 
					//if( ie ) {
						//preventDefault(e);
					//}
				}

				function disable_scroll() {
					window.onmousewheel = document.onmousewheel = wheel;
					document.onkeydown = keydown;
					document.body.ontouchmove = touchmove;
				}

				function enable_scroll() {
					window.onmousewheel = document.onmousewheel = document.onkeydown = document.body.ontouchmove = null;  
				}

				var docElem = window.document.documentElement,
					scrollVal,
					isRevealed, 
					noscroll, 
					isAnimating,
					container = document.body,
					trigger = container.querySelector( '.trigger' );

				function scrollY() {
					return window.pageYOffset || docElem.scrollTop;
				}
				
				function scrollPage() {

					var bodyWidth = document.body.clientWidth;

					if (bodyWidth >= 800) {
						scrollVal = scrollY();
						
						if( noscroll && !ie ) {
							if( scrollVal < 0 ) return false;
							// keep it that way
							window.scrollTo( 0, 0 );
						}

						if( classie.has( container, 'notrans' ) ) {
							classie.remove( container, 'notrans' );
							return false;
						}

						if( isAnimating ) {
							return false;
						}
						
						if( scrollVal <= 0 && isRevealed ) {
							toggle(0);
						}
						else if( scrollVal > 0 && !isRevealed ){
							toggle(1);
						}
					}

				}

				function toggle( reveal ) {
					isAnimating = true;
					if( reveal ) {
						classie.add( container, 'collapse' );
					}
					else {
						noscroll = true;
						disable_scroll();
						classie.remove( container, 'collapse' );
					}

					// simulating the end of the transition:
					setTimeout( function() {
						isRevealed = !isRevealed;
						isAnimating = false;
						if( reveal ) {
							noscroll = false;
							enable_scroll();
						}
					}, 1200 );
				}

				var bodyWidth = document.body.clientWidth;
				if (bodyWidth >= 800) {
					// refreshing the page...
					var pageScroll = scrollY();
					noscroll = pageScroll === 0;
					disable_scroll();
			
					if( pageScroll ) {
						isRevealed = true;
						classie.add( container, 'notrans' );
						classie.add( container, 'collapse' );
					}

					window.addEventListener( 'scroll', scrollPage );
					trigger.addEventListener( 'click', function() { toggle( 'reveal' ); } );
				}

			})();
		</script>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-59293417-1', 'auto');
		  ga('send', 'pageview');

		</script>
</body>
</html>